<!-- Âç∞Á´†Â≠óÈ´îÂç≥ÊôÇÈ†êË¶ΩÁ≥ªÁµ± - Êï¥ÂêàËá™Ë®ÇÂ≠óÈ´îÁâà -->
<div id="stamp-custom-font-widget" style="position: relative; isolation: isolate;">
    <style>
        /* Âü∫Á§éÊ®£Âºè */
        #stamp-custom-font-widget {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", sans-serif;
            background: #ffffff;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        #stamp-custom-font-widget * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        /* Ê®ôÈ°å */
        #stamp-custom-font-widget .scfw-header {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
            margin-bottom: 25px;
        }
        
        #stamp-custom-font-widget .scfw-title {
            font-size: 22px;
            color: #333;
            margin-bottom: 8px;
        }
        
        #stamp-custom-font-widget .scfw-subtitle {
            font-size: 14px;
            color: #666;
        }
        
        /* ÊéßÂà∂ÂçÄ */
        #stamp-custom-font-widget .scfw-controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
        }
        
        #stamp-custom-font-widget .scfw-control-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 15px;
            align-items: end;
        }
        
        #stamp-custom-font-widget .scfw-control {
            display: flex;
            flex-direction: column;
        }
        
        #stamp-custom-font-widget .scfw-label {
            font-size: 14px;
            font-weight: bold;
            color: #555;
            margin-bottom: 8px;
        }
        
        #stamp-custom-font-widget .scfw-input,
        #stamp-custom-font-widget .scfw-select {
            padding: 10px 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 15px;
            font-family: inherit;
            width: 100%;
            transition: all 0.2s;
        }
        
        #stamp-custom-font-widget .scfw-input:focus,
        #stamp-custom-font-widget .scfw-select:focus {
            outline: none;
            border-color: #80bdff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }
        
        /* ËºâÂÖ•ÊåâÈàï */
        #stamp-custom-font-widget .scfw-load-btn {
            width: 100%;
            padding: 12px;
            background: #B5D5B0;
            color: #333;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.2s;
        }
        
        #stamp-custom-font-widget .scfw-load-btn:hover {
            background: #97BF90;
            transform: translateY(-2px);
        }
        
        #stamp-custom-font-widget .scfw-load-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Â≠óÈ´îÁ∂≤Ê†º */
        #stamp-custom-font-widget .scfw-font-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            min-height: 200px;
        }
        
        #stamp-custom-font-widget .scfw-font-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        #stamp-custom-font-widget .scfw-font-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
            border-color: #B5D5B0;
        }
        
        #stamp-custom-font-widget .scfw-font-card.selected {
            border-color: #28a745;
            background: #f0fff4;
        }
        
        #stamp-custom-font-widget .scfw-font-card.selected::after {
            content: '‚úì';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: #28a745;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            z-index: 10;
        }
        
        /* Âç∞Á´†È†êË¶Ω */
        #stamp-custom-font-widget .scfw-stamp-preview {
            padding: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            background: #fafafa;
            position: relative;
        }
        
        #stamp-custom-font-widget .scfw-stamp {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        #stamp-custom-font-widget .scfw-stamp.ÊñπÂΩ¢ {
            width: 160px;
            height: 160px;
            border: 4px solid #dc3545;
            border-radius: 0;
        }
        
        #stamp-custom-font-widget .scfw-stamp.ÂúìÂΩ¢,
        #stamp-custom-font-widget .scfw-stamp.Ê©¢ÂúìÂΩ¢ {
            width: 160px;
            height: 160px;
            border: 4px solid #dc3545;
            border-radius: 50%;
        }
        
        #stamp-custom-font-widget .scfw-stamp.Ê©¢ÂúìÂΩ¢ {
            width: 190px;
            height: 150px;
        }
        
        #stamp-custom-font-widget .scfw-stamp.Èï∑ÊñπÂΩ¢ {
            width: 200px;
            height: 140px;
            border: 4px solid #dc3545;
            border-radius: 0;
        }
        
        #stamp-custom-font-widget .scfw-stamp-text {
            font-size: 40px;
            color: #dc3545;
            font-weight: bold;
            line-height: 1.2;
            text-align: center;
        }
        
        #stamp-custom-font-widget .scfw-stamp-pattern {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 20px;
            opacity: 0.4;
        }
        
        /* Â≠óÈ´îÂêçÁ®± */
        #stamp-custom-font-widget .scfw-font-name {
            padding: 12px;
            text-align: center;
            font-size: 14px;
            font-weight: bold;
            background: #f0f0f0;
            color: #333;
            border-top: 1px solid #e0e0e0;
        }
        
        /* ËºâÂÖ•‰∏≠ */
        #stamp-custom-font-widget .scfw-loading {
            text-align: center;
            padding: 60px;
            color: #999;
        }
        
        #stamp-custom-font-widget .scfw-font-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 14px;
            color: #999;
        }
        
        /* ÂêåÊ≠•ÁãÄÊÖã */
        #stamp-custom-font-widget .scfw-sync-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* ÈüøÊáâÂºè */
        @media (max-width: 768px) {
            #stamp-custom-font-widget .scfw-control-grid {
                grid-template-columns: 1fr;
            }
            
            #stamp-custom-font-widget .scfw-font-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            #stamp-custom-font-widget .scfw-stamp {
                transform: scale(0.85);
            }
        }
    </style>
    
    <!-- ÂêåÊ≠•ÁãÄÊÖã -->
    <div class="scfw-sync-status" id="scfw-sync-status">‚úÖ Â∑≤ÂêåÊ≠•</div>
    
    <!-- ‰∏ªÂÆπÂô® -->
    <div class="scfw-header">
        <h2 class="scfw-title">üéØ Âç∞Á´†Â≠óÈ´îÂç≥ÊôÇÈ†êË¶ΩÁ≥ªÁµ±</h2>
        <p class="scfw-subtitle">‰ΩøÁî®Ëá™Ë®ÇÂ≠óÈ´îÔºåÂç≥ÊôÇÈ†êË¶Ω‰∏¶ÂêåÊ≠•Âà∞ÂïÜÂìÅÈÅ∏È†Ö</p>
    </div>
    
    <!-- ÊéßÂà∂ÂçÄ -->
    <div class="scfw-controls">
        <div class="scfw-control-grid">
            <div class="scfw-control">
                <label class="scfw-label">Âç∞Á´†ÊñáÂ≠ó</label>
                <input type="text" 
                       class="scfw-input" 
                       id="scfw-text" 
                       placeholder="Ëº∏ÂÖ•ÊñáÂ≠óÔºàÊúÄÂ§ö6Â≠óÔºâ" 
                       maxlength="6" 
                       value="Âç∞Á´†È†êË¶Ω">
            </div>
            
            <div class="scfw-control">
                <label class="scfw-label">Âç∞Á´†ÂΩ¢ÁãÄ</label>
                <select class="scfw-select" id="scfw-shape">
                    <option value="ÊñπÂΩ¢">ÊñπÂΩ¢</option>
                    <option value="ÂúìÂΩ¢">ÂúìÂΩ¢</option>
                    <option value="Ê©¢ÂúìÂΩ¢">Ê©¢ÂúìÂΩ¢</option>
                    <option value="Èï∑ÊñπÂΩ¢">Èï∑ÊñπÂΩ¢</option>
                </select>
            </div>
            
            <div class="scfw-control">
                <label class="scfw-label">Ë£ùÈ£æÂúñÊ°à</label>
                <select class="scfw-select" id="scfw-pattern">
                    <option value="">ÁÑ°</option>
                    <option value="Á≥ñÊûú">Á≥ñÊûú</option>
                    <option value="ÊÑõÂøÉ">ÊÑõÂøÉ</option>
                    <option value="Â∞èËä±">Â∞èËä±</option>
                </select>
            </div>
            
            <div class="scfw-control">
                <label class="scfw-label">ÊñáÂ≠óÈ°èËâ≤</label>
                <select class="scfw-select" id="scfw-color">
                    <option value="#dc3545">Êú±Á¥Ö</option>
                    <option value="#000000">ÈªëËâ≤</option>
                    <option value="#0066cc">ËóçËâ≤</option>
                    <option value="#28a745">Á∂†Ëâ≤</option>
                </select>
            </div>
        </div>
    </div>
    
    <!-- ËºâÂÖ•Â≠óÈ´îÊåâÈàï -->
    <button class="scfw-load-btn" id="scfw-load-btn">
        ËºâÂÖ•ÊâÄÊúâÂ≠óÈ´îÈ†êË¶Ω
    </button>
    
    <!-- Â≠óÈ´îÁ∂≤Ê†º -->
    <div class="scfw-font-grid" id="scfw-font-grid">
        <div class="scfw-loading">ÈªûÊìä‰∏äÊñπÊåâÈàïËºâÂÖ•Â≠óÈ´î</div>
    </div>
</div>

<script>
(function() {
    // Â∞ÅË£ùÁöÑÁ®ãÂºèÁ¢º
    const widget = document.getElementById('stamp-custom-font-widget');
    if (!widget) return;
    
    // Â≠óÈ´îÊ∏ÖÂñÆÈÖçÁΩÆ - ‰ΩøÁî®ÊÇ®ÁöÑÂ≠óÈ´î
    const availableFonts = [
        { id: 1, name: 'Á≤âÂúìÈ´î', filename: 'Á≤âÂúìÈ´îÂÖ®ÁπÅÈ´î.ttf', displayName: 'Á≤âÂúìÈ´î' },
        { id: 2, name: 'Á≤íÁ∑öÈ´î‰∏çÁ≠âÂØ¨', filename: 'Á≤íÁ∑öÈ´î‰∏çÁ≠âÂØ¨ÂÖ®ÁπÅÈ´î.ttf', displayName: 'Á≤íÁ∑öÈ´î(‰∏çÁ≠âÂØ¨)' },
        { id: 3, name: 'Á≤íÁ∑öÈ´îÁ≠âÂØ¨', filename: 'Á≤íÁ∑öÈ´îÁ≠âÂØ¨ÂÖ®ÁπÅÈ´î.ttf', displayName: 'Á≤íÁ∑öÈ´î(Á≠âÂØ¨)' },
        { id: 4, name: 'Á≤óÁ∑öÈ´î‰∏çÁ≠âÂØ¨', filename: 'Á≤óÁ∑öÈ´î‰∏çÁ≠âÂØ¨Áâà ÂÖ®ÁπÅÈ´î.ttf', displayName: 'Á≤óÁ∑öÈ´î(‰∏çÁ≠âÂØ¨)' },
        { id: 5, name: 'Á≤óÁ∑öÈ´îÁ≠âÂØ¨', filename: 'Á≤óÁ∑öÈ´îÁ≠âÂØ¨Áâà ÂÖ®ÁπÅÈ´î.ttf', displayName: 'Á≤óÁ∑öÈ´î(Á≠âÂØ¨)' },
        { id: 6, name: 'ËÉñË•øÊâãÂØ´È´î', filename: 'ËÉñË•øÊâãÂØ´È´î ÂÖ®ÁπÅÈ´î.ttf', displayName: 'ËÉñË•øÊâãÂØ´È´î' },
        { id: 7, name: 'Ëæ∞ÂÆáËêΩÈõÅÈ´î', filename: 'Ëæ∞ÂÆáËêΩÈõÅÈ´î ‰∏çÁ≠âÂØ¨ÁâàÂÖ®ÁπÅÈ´î.ttf', displayName: 'Ëæ∞ÂÆáËêΩÈõÅÈ´î' },
        // Âä†ÂÖ•ÂÇ≥Áµ±Â≠óÈ´î
        { id: 8, name: 'Ê•∑Êõ∏', filename: '', displayName: 'Ê•∑Êõ∏', systemFont: 'KaiTi, "Ê®ôÊ•∑È´î", serif' },
        { id: 9, name: 'Èö∏Êõ∏', filename: '', displayName: 'Èö∏Êõ∏', systemFont: '"Èö∏Êõ∏", FangSong, serif' },
        { id: 10, name: 'ÁØÜÊõ∏', filename: '', displayName: 'ÁØÜÊõ∏', systemFont: 'SimSun, "ÂÆãÈ´î", serif' }
    ];
    
    // GitHub Â≠óÈ´î URL
    const GITHUB_RAW_URL = 'https://raw.githubusercontent.com/DK0124/font-preview-system/main/fonts/';
    
    // ÂúñÊ°àÂ∞çÊáâ
    const patterns = {
        'Á≥ñÊûú': 'üç¨',
        'ÊÑõÂøÉ': '‚ù§Ô∏è',
        'Â∞èËä±': 'üå∏'
    };
    
    // ÁãÄÊÖã
    let currentSelection = {
        text: 'Âç∞Á´†È†êË¶Ω',
        font: '',
        fontId: null,
        shape: 'ÊñπÂΩ¢',
        pattern: '',
        color: '#dc3545'
    };
    
    let loadedFonts = {};
    let isLoading = false;
    
    // ÂÖÉÁ¥†
    const elements = {
        textInput: widget.querySelector('#scfw-text'),
        shapeSelect: widget.querySelector('#scfw-shape'),
        patternSelect: widget.querySelector('#scfw-pattern'),
        colorSelect: widget.querySelector('#scfw-color'),
        fontGrid: widget.querySelector('#scfw-font-grid'),
        loadBtn: widget.querySelector('#scfw-load-btn'),
        syncStatus: document.getElementById('scfw-sync-status')
    };
    
    // ËºâÂÖ•Â≠óÈ´î
    async function loadFont(fontData) {
        // Â¶ÇÊûúÊòØÁ≥ªÁµ±Â≠óÈ´îÔºåÁõ¥Êé•ËøîÂõû
        if (fontData.systemFont) {
            return true;
        }
        
        // Â¶ÇÊûúÂ∑≤ËºâÂÖ•ÔºåËøîÂõû
        if (loadedFonts[fontData.id]) {
            return loadedFonts[fontData.id];
        }
        
        try {
            const fontUrl = GITHUB_RAW_URL + encodeURIComponent(fontData.filename);
            const fontFace = new FontFace(
                `CustomFont${fontData.id}`, 
                `url(${fontUrl})`
            );
            
            await fontFace.load();
            document.fonts.add(fontFace);
            loadedFonts[fontData.id] = fontFace;
            
            return fontFace;
        } catch (error) {
            console.error(`ËºâÂÖ•Â≠óÈ´îÂ§±Êïó ${fontData.name}:`, error);
            return null;
        }
    }
    
    // ÂâµÂª∫Â≠óÈ´îÂç°Áâá
    function createFontCard(fontData) {
        const card = document.createElement('div');
        card.className = 'scfw-font-card';
        card.dataset.fontId = fontData.id;
        card.dataset.fontName = fontData.name;
        
        // ÂàùÂßã HTML
        card.innerHTML = `
            <div class="scfw-stamp-preview">
                <div class="scfw-font-loading">ËºâÂÖ•‰∏≠...</div>
            </div>
            <div class="scfw-font-name">${fontData.displayName}</div>
        `;
        
        // ËºâÂÖ•Â≠óÈ´îÂæåÊõ¥Êñ∞È†êË¶Ω
        loadFont(fontData).then((loaded) => {
            if (loaded) {
                const previewDiv = card.querySelector('.scfw-stamp-preview');
                previewDiv.innerHTML = `
                    <div class="scfw-stamp ${currentSelection.shape}">
                        <span class="scfw-stamp-text" style="
                            font-family: ${fontData.systemFont || `CustomFont${fontData.id}`};
                            color: ${currentSelection.color};
                        ">
                            ${currentSelection.text || 'ÁØÑ‰æã'}
                        </span>
                        <span class="scfw-stamp-pattern">
                            ${patterns[currentSelection.pattern] || ''}
                        </span>
                    </div>
                `;
            } else {
                const previewDiv = card.querySelector('.scfw-stamp-preview');
                previewDiv.innerHTML = '<div class="scfw-font-loading">ËºâÂÖ•Â§±Êïó</div>';
            }
        });
        
        // ÈªûÊìä‰∫ã‰ª∂
        card.addEventListener('click', function() {
            // ÁßªÈô§ÂÖ∂‰ªñÈÅ∏‰∏≠
            widget.querySelectorAll('.scfw-font-card').forEach(c => 
                c.classList.remove('selected')
            );
            
            // Ê∑ªÂä†ÈÅ∏‰∏≠
            this.classList.add('selected');
            
            // Êõ¥Êñ∞ÈÅ∏Êìá
            currentSelection.font = fontData.name;
            currentSelection.fontId = fontData.id;
            
            // ÂêåÊ≠•Âà∞ BV SHOP
            syncToBVShop('font', fontData.name);
        });
        
        return card;
    }
    
    // Êõ¥Êñ∞ÊâÄÊúâÈ†êË¶Ω
    function updateAllPreviews() {
        widget.querySelectorAll('.scfw-font-card').forEach(card => {
            const fontId = parseInt(card.dataset.fontId);
            const fontData = availableFonts.find(f => f.id === fontId);
            
            if (fontData) {
                const stampEl = card.querySelector('.scfw-stamp');
                const textEl = card.querySelector('.scfw-stamp-text');
                const patternEl = card.querySelector('.scfw-stamp-pattern');
                
                if (stampEl && textEl && patternEl) {
                    // Êõ¥Êñ∞ÂΩ¢ÁãÄ
                    stampEl.className = 'scfw-stamp ' + currentSelection.shape;
                    
                    // Êõ¥Êñ∞ÊñáÂ≠ó
                    textEl.textContent = currentSelection.text || 'ÁØÑ‰æã';
                    textEl.style.color = currentSelection.color;
                    
                    // Êõ¥Êñ∞ÂúñÊ°à
                    patternEl.textContent = patterns[currentSelection.pattern] || '';
                }
            }
        });
    }
    
    // ËºâÂÖ•ÊâÄÊúâÂ≠óÈ´î
    async function loadAllFonts() {
        if (isLoading) return;
        
        isLoading = true;
        elements.loadBtn.disabled = true;
        elements.loadBtn.textContent = 'ËºâÂÖ•‰∏≠...';
        elements.fontGrid.innerHTML = '';
        
        // ÂâµÂª∫ÊâÄÊúâÂ≠óÈ´îÂç°Áâá
        for (const fontData of availableFonts) {
            const card = createFontCard(fontData);
            elements.fontGrid.appendChild(card);
        }
        
        elements.loadBtn.style.display = 'none';
        isLoading = false;
    }
    
    // È°ØÁ§∫ÂêåÊ≠•ÁãÄÊÖã
    function showSyncStatus() {
        elements.syncStatus.style.display = 'block';
        setTimeout(() => {
            elements.syncStatus.style.display = 'none';
        }, 2000);
    }
    
    // ÂêåÊ≠•Âà∞ BV SHOP
    function syncToBVShop(field, value) {
        try {
            switch(field) {
                case 'text':
                    const textInput = document.querySelector('input[placeholder="Ëº∏ÂÖ•ÂÖ≠Â≠óÂÖß"]');
                    if (textInput) {
                        textInput.value = value;
                        textInput.dispatchEvent(new Event('input', { bubbles: true }));
                        textInput.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                    break;
                    
                case 'font':
                    const fontSelect = findBVSelect('Â≠óÈ´î');
                    if (fontSelect) {
                        // ÂòóË©¶ÊâæÂà∞Â∞çÊáâÁöÑÈÅ∏È†Ö
                        let foundOption = false;
                        for (let i = 0; i < fontSelect.options.length; i++) {
                            if (fontSelect.options[i].text === value || 
                                fontSelect.options[i].value === value) {
                                fontSelect.selectedIndex = i;
                                foundOption = true;
                                break;
                            }
                        }
                        
                        if (foundOption) {
                            fontSelect.dispatchEvent(new Event('change', { bubbles: true }));
                        }
                    }
                    break;
                    
                case 'shape':
                    const shapeSelect = findBVSelect('ÂΩ¢ÁãÄ');
                    if (shapeSelect) {
                        shapeSelect.value = value;
                        shapeSelect.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                    break;
                    
                case 'pattern':
                    const patternSelect = findBVSelect('ÂúñÊ°à');
                    if (patternSelect) {
                        patternSelect.value = value || '';
                        patternSelect.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                    break;
            }
            
            showSyncStatus();
        } catch (error) {
            console.error('ÂêåÊ≠•ÈåØË™§:', error);
        }
    }
    
    // Â∞ãÊâæ BV SHOP ÈÅ∏ÊìáÂô®
    function findBVSelect(labelText) {
        const labels = document.querySelectorAll('label');
        for (let label of labels) {
            if (label.textContent.trim() === labelText) {
                const select = label.parentElement.querySelector('select');
                if (select) return select;
            }
        }
        return null;
    }
    
    // Á∂ÅÂÆö‰∫ã‰ª∂
    elements.textInput.addEventListener('input', function(e) {
        currentSelection.text = e.target.value;
        updateAllPreviews();
        syncToBVShop('text', e.target.value);
    });
    
    elements.shapeSelect.addEventListener('change', function(e) {
        currentSelection.shape = e.target.value;
        updateAllPreviews();
        syncToBVShop('shape', e.target.value);
    });
    
    elements.patternSelect.addEventListener('change', function(e) {
        currentSelection.pattern = e.target.value;
        updateAllPreviews();
        syncToBVShop('pattern', e.target.value);
    });
    
    elements.colorSelect.addEventListener('change', function(e) {
        currentSelection.color = e.target.value;
        updateAllPreviews();
    });
    
    elements.loadBtn.addEventListener('click', loadAllFonts);
    
    // Âæû BV SHOP ËºâÂÖ•ÂàùÂßãÂÄº
    function loadFromBVShop() {
        const textInput = document.querySelector('input[placeholder="Ëº∏ÂÖ•ÂÖ≠Â≠óÂÖß"]');
        if (textInput && textInput.value) {
            elements.textInput.value = textInput.value;
            currentSelection.text = textInput.value;
        }
        
        const shapeSelect = findBVSelect('ÂΩ¢ÁãÄ');
        if (shapeSelect && shapeSelect.value) {
            elements.shapeSelect.value = shapeSelect.value;
            currentSelection.shape = shapeSelect.value;
        }
        
        const patternSelect = findBVSelect('ÂúñÊ°à');
        if (patternSelect && patternSelect.value) {
            elements.patternSelect.value = patternSelect.value;
            currentSelection.pattern = patternSelect.value;
        }
    }
    
    // ÂàùÂßãÂåñ
    setTimeout(() => {
        loadFromBVShop();
    }, 500);
    
})();
</script>